# Temporary Makefile to run Go tests for the Linea Monorepo prover packages.

.PHONY: all test clean

# Define the list of Go packages to test
PACKAGES := \
	github.com/consensys/linea-monorepo/prover/maths/... \
	github.com/consensys/linea-monorepo/prover/crypto/... \
	github.com/consensys/linea-monorepo/prover/symbolic/... \
	github.com/consensys/linea-monorepo/prover/protocol/accessors/... \
	github.com/consensys/linea-monorepo/prover/protocol/query/... \
	github.com/consensys/linea-monorepo/prover/protocol/wizard/... \
	github.com/consensys/linea-monorepo/prover/protocol/wizardutils/... \
	github.com/consensys/linea-monorepo/prover/protocol/compiler/innerproduct/... \
	github.com/consensys/linea-monorepo/prover/protocol/compiler/mpts/... \
	github.com/consensys/linea-monorepo/prover/protocol/compiler/logderivativesum/... \
	github.com/consensys/linea-monorepo/prover/protocol/compiler/vortex/... \
	github.com/consensys/linea-monorepo/prover/protocol/compiler/dummy/... \
	github.com/consensys/linea-monorepo/prover/protocol/compiler/localcs/... \
	github.com/consensys/linea-monorepo/prover/protocol/compiler/permutation/... \
	github.com/consensys/linea-monorepo/prover/protocol/compiler/specialqueries/... \
	github.com/consensys/linea-monorepo/prover/protocol/compiler/stitchsplit/... \
	github.com/consensys/linea-monorepo/prover/protocol/compiler/univariates/...

# Default target: runs all tests
all: test

# Target to run all specified Go tests
test:
	@echo "Running all Go tests for Linea Monorepo prover packages..."
	@for pkg in $(PACKAGES); do \
		echo "--> Running tests for $$pkg"; \
		go test $$pkg || exit 1; \
	done
	@echo "All tests completed successfully."

# Target to clean Go build cache (optional, but good practice)
clean:
	@echo "Cleaning Go build cache..."
	@go clean -testcache
	@echo "Go build cache cleaned."

