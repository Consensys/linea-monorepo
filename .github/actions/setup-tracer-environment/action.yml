name: 'Setup Tracer Environment'
description: 'Checkout repository and install what is needed for building / testing'
inputs:
  enable-ssh:
    description: 'Enable ability to ssh into session'
    required: false
    default: false
  github-token:
    description: 'Github token (needed for downloading corset)'
    required: false

runs:
  using: 'composite'
  steps:
      - name: Setup upterm session
        if: ${{ inputs.enable-ssh == 'true' }}
        uses: lhotari/action-upterm@b0357f23233f5ea6d58947c0c402e0631bab7334 #v1

      - name: Install Go
        uses: actions/setup-go@d35c59abb061a4a6fb18e82ac0862c26744d6ab5 # v5.5.0
        with:
          go-version: '1.24.6'
          cache-dependency-path: "**/*.sum"

      - name: Setup Java and Gradle
        uses: ./.github/actions/setup-java-and-gradle
        with:
          java-version: '21'
