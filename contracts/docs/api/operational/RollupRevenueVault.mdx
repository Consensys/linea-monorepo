# `RollupRevenueVault`

Accepts rollup revenue, and performs burning operations.

### INVOICE_SUBMITTER_ROLE

```solidity
bytes32 INVOICE_SUBMITTER_ROLE
```

### BURNER_ROLE

```solidity
bytes32 BURNER_ROLE
```

### ETH_BURNT_PERCENTAGE

```solidity
uint256 ETH_BURNT_PERCENTAGE
```

Percentage of ETH to be burnt when performing the burn and bridge operation.

### v3Dex

```solidity
contract IV3DexSwap v3Dex
```

Decentralized exchange contract for swapping ETH to LINEA tokens.

### invoicePaymentReceiver

```solidity
address invoicePaymentReceiver
```

Address to receive invoice payments.

### invoiceArrears

```solidity
uint256 invoiceArrears
```

Amount of invoice arrears.

### lastInvoiceDate

```solidity
uint256 lastInvoiceDate
```

Timestamp of the last invoice.

### tokenBridge

```solidity
contract TokenBridge tokenBridge
```

Address of the token bridge contract.

### messageService

```solidity
contract L2MessageService messageService
```

Address of the L2 message service contract.

### l1LineaTokenBurner

```solidity
address l1LineaTokenBurner
```

Address of the L1 LINEA token burner contract to which LINEA tokens are bridged for burning.

### lineaToken

```solidity
address lineaToken
```

Address of the LINEA token contract.

### constructor

```solidity
constructor() public
```

### initialize

```solidity
function initialize(uint256 _lastInvoiceDate, address _defaultAdmin, address _invoiceSubmitter, address _burner, address _invoicePaymentReceiver, address _tokenBridge, address _messageService, address _l1LineaTokenBurner, address _lineaToken, address _v3Dex) external
```

Initializes the contract state.

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _lastInvoiceDate | uint256 | Timestamp of the last invoice. |
| _defaultAdmin | address | Address to be granted the default admin role. |
| _invoiceSubmitter | address | Address to be granted the invoice submitter role. |
| _burner | address | Address to be granted the burner role. |
| _invoicePaymentReceiver | address | Address to receive invoice payments. |
| _tokenBridge | address | Address of the token bridge contract. |
| _messageService | address | Address of the L2 message service contract. |
| _l1LineaTokenBurner | address | Address of the L1 LINEA token burner contract. |
| _lineaToken | address | Address of the LINEA token contract. |
| _v3Dex | address | Address of the V3 DEX contract. |

### initializeRolesAndStorageVariables

```solidity
function initializeRolesAndStorageVariables(uint256 _lastInvoiceDate, address _defaultAdmin, address _invoiceSubmitter, address _burner, address _invoicePaymentReceiver, address _tokenBridge, address _messageService, address _l1LineaTokenBurner, address _lineaToken, address _v3Dex) external
```

Reinitializes the contract state for upgrade.

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _lastInvoiceDate | uint256 | Timestamp of the last invoice. |
| _defaultAdmin | address | Address to be granted the default admin role. |
| _invoiceSubmitter | address | Address to be granted the invoice submitter role. |
| _burner | address | Address to be granted the burner role. |
| _invoicePaymentReceiver | address | Address to receive invoice payments. |
| _tokenBridge | address | Address of the token bridge contract. |
| _messageService | address | Address of the L2 message service contract. |
| _l1LineaTokenBurner | address | Address of the L1 LINEA token burner contract. |
| _lineaToken | address | Address of the LINEA token contract. |
| _v3Dex | address | Address of the V3 DEX contract. |

### __RollupRevenueVault_init

```solidity
function __RollupRevenueVault_init(uint256 _lastInvoiceDate, address _defaultAdmin, address _invoiceSubmitter, address _burner, address _invoicePaymentReceiver, address _tokenBridge, address _messageService, address _l1LineaTokenBurner, address _lineaToken, address _v3Dex) internal
```

### submitInvoice

```solidity
function submitInvoice(uint256 _startTimestamp, uint256 _endTimestamp, uint256 _invoiceAmount) external payable
```

Submit invoice to pay to the designated receiver.

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _startTimestamp | uint256 | Start of the period the invoice is covering. |
| _endTimestamp | uint256 | End of the period the invoice is covering. |
| _invoiceAmount | uint256 | New invoice amount. |

### burnAndBridge

```solidity
function burnAndBridge(uint256 _minLineaOut, uint256 _deadline, uint160 _sqrtPriceLimitX96) external
```

Burns 20% of the ETH balance and uses the rest to buy LINEA tokens which are then bridged to L1 to be burned.

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _minLineaOut | uint256 | Number of LINEA tokens to receive as a minimum (slippage protection). Computed off-chain just prior to execution. |
| _deadline | uint256 | Time after which the transaction will revert if not yet processed. |
| _sqrtPriceLimitX96 | uint160 | Price limit of the swap as a Q64.96 value. |

### updateInvoicePaymentReceiver

```solidity
function updateInvoicePaymentReceiver(address _newInvoicePaymentReceiver) external
```

Update the invoice payment receiver.

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _newInvoicePaymentReceiver | address | New invoice payment receiver address. |

### updateInvoiceArrears

```solidity
function updateInvoiceArrears(uint256 _newInvoiceArrears, uint256 _lastInvoiceDate) external
```

Update the invoice arrears.

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _newInvoiceArrears | uint256 | New invoice arrears value. |
| _lastInvoiceDate | uint256 | Timestamp of the last invoice. |

### updateL1LineaTokenBurner

```solidity
function updateL1LineaTokenBurner(address _newL1LineaTokenBurner) external
```

Updates the address of the L1 LINEA token burner contract.

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _newL1LineaTokenBurner | address | Address of the new L1 LINEA token burner contract. |

### updateDex

```solidity
function updateDex(address _newV3Dex) external
```

Updates the address of the V3 DEX contract.

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _newV3Dex | address | Address of the new V3 DEX contract. |

### fallback

```solidity
fallback() external payable
```

Fallback function - Receives Funds.

### receive

```solidity
receive() external payable
```

Receive function - Receives Funds.

