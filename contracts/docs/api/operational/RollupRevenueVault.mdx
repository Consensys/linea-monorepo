# `RollupRevenueVault`

Accepts rollup revenue, and performs burning operations.

### INVOICE_SUBMITTER_ROLE

```solidity
bytes32 INVOICE_SUBMITTER_ROLE
```

### BURNER_ROLE

```solidity
bytes32 BURNER_ROLE
```

### ETH_BURNT_PERCENTAGE

```solidity
uint256 ETH_BURNT_PERCENTAGE
```

Percentage of ETH to be burnt when performing the burn and bridge operation.

### dexSwapAdapter

```solidity
address dexSwapAdapter
```

Decentralized exchange adapter contract for swapping ETH to LINEA tokens.

### invoicePaymentReceiver

```solidity
address invoicePaymentReceiver
```

Address to receive invoice payments.

### invoiceArrears

```solidity
uint256 invoiceArrears
```

Amount of invoice arrears.

### lastInvoiceDate

```solidity
uint256 lastInvoiceDate
```

Timestamp of the last invoice.

### tokenBridge

```solidity
contract TokenBridge tokenBridge
```

Address of the token bridge contract.

### messageService

```solidity
contract L2MessageService messageService
```

Address of the L2 message service contract.

### l1LineaTokenBurner

```solidity
address l1LineaTokenBurner
```

Address of the L1 LINEA token burner contract to which LINEA tokens are bridged for burning.

### lineaToken

```solidity
address lineaToken
```

Address of the LINEA token contract.

### constructor

```solidity
constructor() public
```

### initializeRolesAndStorageVariables

```solidity
function initializeRolesAndStorageVariables(uint256 _lastInvoiceDate, address _defaultAdmin, address _invoiceSubmitter, address _burner, address _invoicePaymentReceiver, address _tokenBridge, address _messageService, address _l1LineaTokenBurner, address _lineaToken, address _dexSwapAdapter) external
```

Reinitializes the contract state for upgrade.

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _lastInvoiceDate | uint256 | The default or starting timestamp for invoices less 1 second. |
| _defaultAdmin | address | Address to be granted the default admin role. |
| _invoiceSubmitter | address | Address to be granted the invoice submitter role. |
| _burner | address | Address to be granted the burner role. |
| _invoicePaymentReceiver | address | Address to receive invoice payments. |
| _tokenBridge | address | Address of the token bridge contract. |
| _messageService | address | Address of the L2 message service contract. |
| _l1LineaTokenBurner | address | Address of the L1 LINEA token burner contract. |
| _lineaToken | address | Address of the LINEA token contract. |
| _dexSwapAdapter | address | Address of the DEX swap adapter contract. |

### __RollupRevenueVault_init

```solidity
function __RollupRevenueVault_init(uint256 _lastInvoiceDate, address _defaultAdmin, address _invoiceSubmitter, address _burner, address _invoicePaymentReceiver, address _tokenBridge, address _messageService, address _l1LineaTokenBurner, address _lineaToken, address _dexSwapAdapter) internal
```

### submitInvoice

```solidity
function submitInvoice(uint256 _startTimestamp, uint256 _endTimestamp, uint256 _invoiceAmount) external payable
```

Submit invoice to pay to the designated receiver.

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _startTimestamp | uint256 | Start of the period the invoice is covering. |
| _endTimestamp | uint256 | End of the period the invoice is covering. |
| _invoiceAmount | uint256 | New invoice amount. |

### burnAndBridge

```solidity
function burnAndBridge(bytes _swapData) external
```

Burns 20% of the ETH balance and uses the rest to buy LINEA tokens which are then bridged to L1 to be burned.

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _swapData | bytes | Encoded calldata for the DEX swap function. |

### updateInvoicePaymentReceiver

```solidity
function updateInvoicePaymentReceiver(address _newInvoicePaymentReceiver) external
```

Update the invoice payment receiver.

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _newInvoicePaymentReceiver | address | New invoice payment receiver address. |

### updateInvoiceArrears

```solidity
function updateInvoiceArrears(uint256 _invoiceArrears, uint256 _lastInvoiceDate) external
```

Update the invoice arrears.

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _invoiceArrears | uint256 | New invoice arrears value. |
| _lastInvoiceDate | uint256 | Timestamp of the last invoice. |

### updateL1LineaTokenBurner

```solidity
function updateL1LineaTokenBurner(address _newL1LineaTokenBurner) external
```

Updates the address of the L1 LINEA token burner contract.

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _newL1LineaTokenBurner | address | Address of the new L1 LINEA token burner contract. |

### updateDexSwapAdapter

```solidity
function updateDexSwapAdapter(address _newDexSwapAdapter) external
```

Updates the address of the DEX swap adapter contract.

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _newDexSwapAdapter | address | Address of the new DEX swap adapter contract. |

### fallback

```solidity
fallback() external payable
```

Fallback function - Receives Funds.

### receive

```solidity
receive() external payable
```

Receive function - Receives Funds.

### _payArrears

```solidity
function _payArrears() internal
```

Pays off arrears where applicable and balance permits.

